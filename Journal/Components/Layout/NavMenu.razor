@inject IThemeService ThemeService
<nav class="top-navbar-container">
    <div class="navbar-brand">
        📘 <span>Journal</span>
    </div>
    
    <div class="nav-menu">
        <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
            <i class="bi bi-house-door"></i> Home
        </NavLink>

        <NavLink class="nav-link" href="JournalEntry">
            <i class="bi bi-pencil-square"></i> New Entry
        </NavLink>

        <NavLink class="nav-link" href="JournalTimeline">
            <i class="bi bi-clock-history"></i> Timeline
        </NavLink>

        <NavLink class="nav-link" href="Calendar">
            <i class="bi bi-calendar3"></i> Calendar
        </NavLink>

        <NavLink class="nav-link" href="/Setting">
            <i class="bi bi-gear"></i> Settings
        </NavLink>
    </div>

    <div class="theme-switcher">
        <button class="theme-btn @(currentTheme == "light" ? "active" : "")" @onclick='() => SetTheme("light")' title="Light Mode">
            <i class="bi bi-sun"></i>
        </button>
        <button class="theme-btn @(currentTheme == "dark" ? "active" : "")" @onclick='() => SetTheme("dark")' title="Dark Mode">
            <i class="bi bi-moon-stars"></i>
        </button>
        <button class="theme-btn @(currentTheme == "sepia" ? "active" : "")" @onclick='() => SetTheme("sepia")' title="Sepia Mode">
            <i class="bi bi-book"></i>
        </button>
        
        <div class="divider"></div>
        
        <button class="logout-btn" @onclick="HandleLogout" title="Logout">
            <i class="bi bi-box-arrow-right"></i>
        </button>
    </div>
</nav>

@code {
    [Inject] private IAuthService AuthService { get; set; } = default!;
    [Inject] private NavigationManager Navigation { get; set; } = default!;
    private string currentTheme = "light";

    protected override async Task OnInitializedAsync()
    {
        currentTheme = await ThemeService.GetThemeAsync();
    }

    private async Task SetTheme(string theme)
    {
        currentTheme = theme;
        await ThemeService.SetThemeAsync(theme);
    }

    private async Task HandleLogout()
    {
        await AuthService.LogoutAsync();
        Navigation.NavigateTo("/Login", true);
    }
}